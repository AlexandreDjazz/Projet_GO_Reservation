<!DOCTYPE html>
<html>
	<head>
	    <meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <link rel="stylesheet" type="text/css" href="/static/style.css">
	    <script type="text/javascript" src="/static/functions.js" defer></script>
	    <title>Reservations</title>
	</head>
	<body>
		<header class="flex flexBetween nowrap">
            <button class="block" type="button" onclick="redirectToMainMenu()">Retour</button>
            <div id="errorPopup" class="popup">
                <div class="popup-content">
                    <p id="errorMessage"></p>
                </div>
            </div>

            <h1>Projet Go Reservation</h1>
        </header>

		<main>
			{{ if . }}
			<table>
				<thead>
				<tr>
					<th>ID Réservation</th>
					<th>Horaire de début</th>
					<th>Horaire de fin</th>
					<th>État</th>
					<th>Nom Salle</th>
					<th>ID Salle</th>
					<th>Place Salle</th>
					<th>Mettre à jour</th>
					<th>Supprimer</th>
				</tr>
				</thead>
				<tbody>
				{{ range . }}
				<tr>
					<td>{{ .IdReservation }}</td>
					<td>{{ .HoraireStart }}</td>
					<td>{{ .HoraireEnd }}</td>
					<td>
						<select name="etat">
						 	<option value="nil">{{ .NomEtat }}</option>
						 	<hr>
					        <option value="1">En Cours</option>
					        <option value="2">Terminée</option>
					        <option value="3">Annulée</option>
					        <option value="4">A Venir</option>
					    </select>

					</td>
					<td>{{ .NomSalle }}</td>
					<td>{{ .IdSalle }}</td>
					<td>{{ .PlaceSalle }}</td>
					<td><button class="marginAuto block" type="button" onclick="redirectUpdate('{{ .IdReservation }}')">Mettre à jour</button></td>
					<td><button class="marginAuto block" type="button" onclick="redirectDelete('{{ .IdReservation }}')">Supprimer</button></td>
				</tr>
				{{ end }}
				</tbody>
			</table>
			<h5 class="flex flexCenter underline bold">Vous ne pouvez mettre à jour que l'État</h5>
			{{ else }}
			<p>Hmmmm, an error occured :/</p>
			{{ end }}

			<button class="marginAuto marginBottom40 marginTop40 block" type="button" onclick="redirectToMainList()">Retour</button>
		</main>

		<footer class="flex flexAround padding5 underline">
            <div>
                Créé par deux débiles, un bigleux et un chevelu, pour le futur prof de C
            </div>
            <div>
                Copyright 2024
            </div>
        </footer>

	</body>

</html>
